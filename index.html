<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Styles de base pour le corps de la page */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #dbeafe; /* Fond bleu tr√®s clair (Tailwind blue-50) */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Hauteur minimale de la fen√™tre */
            padding: 20px;
            box-sizing: border-box;
        }
        /* Conteneur principal du quiz */
        .quiz-container {
            background-color: #ffffff; /* Fond blanc */
            border-radius: 15px; /* Coins arrondis */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Ombre douce */
            padding: 30px;
            max-width: 800px; /* Largeur maximale pour la lisibilit√© */
            width: 100%; /* Pleine largeur sur petits √©crans */
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px; /* Espacement entre les √©l√©ments */
        }
        /* Style du texte de la question */
        .question-text {
            font-size: 1.5rem; /* Taille de police plus grande */
            font-weight: 600; /* Semi-gras */
            color: #333; /* Texte gris fonc√© */
            margin-bottom: 20px;
        }
        /* Style des options de r√©ponse individuelles */
        .answer-option {
            background-color: #e2e8f0; /* Gris-bleu clair */
            border-radius: 10px; /* Coins arrondis */
            padding: 15px 20px;
            margin-bottom: 10px;
            cursor: pointer; /* Indique que l'√©l√©ment est clickable */
            transition: background-color 0.3s ease, transform 0.2s ease; /* Transitions douces */
            text-align: left;
            font-size: 1.1rem;
            color: #4a5568; /* Texte gris moyen */
            border: 2px solid transparent; /* Bordure transparente pour la s√©lection */
        }
        /* Effet au survol des options de r√©ponse */
        .answer-option:hover {
            background-color: #93c5fd; /* Bleu plus doux (Tailwind blue-300) au survol */
            transform: translateY(-2px); /* L√©ger effet de soul√®vement */
        }
        /* Style de l'option de r√©ponse correcte */
        .answer-option.correct {
            background-color: #bfdbfe; /* Bleu-200 */
            border-color: #3b82f6; /* Bleu-500 */
        }
        /* Style de l'option de r√©ponse incorrecte */
        .answer-option.incorrect {
            background-color: #fce7f6; /* Pink-100 (plus clair) */
            border-color: #ec4899; /* Pink-500 (plus fuchsia) */
        }
        /* Style de l'option de r√©ponse s√©lectionn√©e par l'utilisateur */
        .answer-option.selected {
            background-color: #fffef0; /* Jaune-100 */
            border-color: #eab308; /* Jaune-500 */
        }
        /* Style du texte de la justification (rationale) */
        .rationale {
            font-size: 0.95rem;
            margin-top: 5px;
            padding: 10px;
            border-radius: 8px;
            text-align: left;
            color: #4a5568;
            background-color: #f0f2f5;
            border-left: 4px solid #60a5fa; /* Bordure gauche bleue-400 */
        }
        /* Style sp√©cifique de la justification pour les r√©ponses correctes */
        .rationale.correct-rationale {
            border-left-color: #3b82f6; /* Bleu-500 */
            background-color: #e0f2fe; /* Bleu-100 */
        }
        /* Style sp√©cifique de la justification pour les r√©ponses incorrectes */
        .rationale.incorrect-rationale {
            border-left-color: #ec4899; /* Pink-500 (plus fuchsia) */
            background-color: #fce7f6; /* Pink-100 (plus clair) */
        }
        /* Style sp√©cifique de la justification pour la r√©ponse s√©lectionn√©e par l'utilisateur */
        .rationale.selected-rationale {
            border-left-color: #eab308; /* Jaune-500 */
            background-color: #fffef0; /* Jaune-100 */
        }
        /* Style g√©n√©ral des boutons */
        .button {
            background-color: #1d4ed8; /* Fond bleu profond (Tailwind blue-700) */
            color: white; /* Texte blanc */
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease; /* Transitions douces */
            border: none;
            box-shadow: 0 4px 10px rgba(66, 153, 225, 0.3); /* Ombre douce */
        }
        /* Effet au survol des boutons */
        .button:hover {
            background-color: #1e40af; /* Bleu plus fonc√© au survol (Tailwind blue-800) */
            transform: translateY(-2px); /* L√©ger effet de soul√®vement */
        }
        /* √âtat d√©sactiv√© des boutons */
        .button:disabled {
            background-color: #a0aec0; /* Gris√© lorsque d√©sactiv√© */
            cursor: not-allowed;
            box-shadow: none;
        }
        /* Conteneur de la barre de progression */
        .progress-bar {
            width: 100%;
            height: 20px; /* Plus √©pais */
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px; /* Moins de marge pour rapprocher du score */
            display: flex; /* Utiliser flexbox pour les segments */
            font-weight: bold; /* Texte en gras dans la barre */
            color: white; /* Texte blanc par default pour les sections color√©es */
            font-size: 0.9em; /* Taille du texte dans la barre */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Ombre pour la lisibilit√© */
        }
        /* Sections de la barre de progression et du graphique final */
        .progress-section {
            height: 100%;
            display: flex; /* Pour centrer le texte */
            align-items: center;
            justify-content: center;
            transition: width 0.3s ease-in-out; /* Transition de largeur douce */
            box-sizing: border-box; /* Pour inclure padding/border dans la largeur */
        }
        .correct-section { background-color: #1d4ed8; } /* Bleu profond (Tailwind blue-700) */
        .incorrect-section { background-color: #ec4899; } /* Fuchsia */
        .unanswered-section { background-color: #93c5fd; color: #4a5568; text-shadow: none; } /* Bleu doux (Tailwind blue-300), texte fonc√© */
        /* Style de l'affichage du score final */
        .score-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2d3748; /* Texte gris fonc√© */
            margin-bottom: 20px;
        }
        /* Style du texte de l'indice */
        .hint-text {
            font-style: italic;
            color: #718096; /* Texte gris att√©nu√© */
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .live-score-display {
            font-size: 1.1rem; /* Plus grand */
            font-weight: 600; /* Plus gras */
            color: #333;
            margin-top: 0px; /* Moins de marge pour rapprocher de la barre */
            margin-bottom: 10px;
            text-align: center; /* Centrer le texte */
        }

        /* Style sp√©cifique pour la barre de r√©sultats finaux */
        .final-results-chart-container {
            height: 30px; /* Plus √©pais pour le graphique final */
            margin-top: 20px;
            margin-bottom: 20px;
        }
        /* Pour le graphique final, on ne veut qu'une seule section pour le correct */
        .final-results-chart-container .incorrect-section,
        .final-results-chart-container .unanswered-section {
            display: none; /* Cacher ces sections dans le graphique final */
        }
        .final-results-chart-container .correct-section {
            width: 100% !important; /* Force la section correcte √† prendre toute la largeur disponible */
            justify-content: center; /* Centrer le texte */
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie</h1>
        <div id="liveScoreDisplay" class="live-score-display"></div>
        <div class="progress-bar" id="progressBar">
            <!-- Sections de progression seront ins√©r√©es ici par JavaScript -->
            <div class="progress-section correct-section" id="correctProgress"></div>
            <div class="progress-section incorrect-section" id="incorrectProgress"></div>
            <div class="progress-section unanswered-section" id="unansweredProgress"></div>
        </div>
        <div id="quiz" class="flex flex-col gap-4">
            <!-- La question et les r√©ponses seront charg√©es ici par JavaScript -->
        </div>
        <div id="navigation" class="flex justify-between mt-6">
            <button id="prevButton" class="button" disabled>Pr√©c√©dent</button>
            <button id="nextButton" class="button">Suivant</button>
        </div>
        <button id="restartButton" class="button mt-6 hidden">Recommencer le Quiz</button>
    </div>

    <script>
        // Donn√©es du quiz
        const quizData = {
            "questions": [
                // Questions from 01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie
                {
                    "question": "Quel est l'objectif principal de la formation √† la collecte et au calcul des variables de paie pour un futur gestionnaire ?",
                    "hint": "Pensez √† la finalit√© de cette activit√© pour la r√©mun√©ration des salari√©s.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Apprendre √† r√©duire le temps de travail des salari√©s.",
                            "rationale": "‚ùå C'est incorrect. L'objectif principal est d'assurer une r√©mun√©ration juste et conforme, pas de r√©duire le temps de travail. üí°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Assurer une r√©mun√©ration juste et conforme au travail effectu√© par les salari√©s.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La formation √† la collecte et au calcul des variables de paie est essentielle pour garantir que les salari√©s soient pay√©s correctement et conform√©ment au travail qu'ils ont effectu√©, √©vitant ainsi les erreurs et les litiges. üìòüí∞",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Ma√Ætriser uniquement les aspects fiscaux de la paie.",
                            "rationale": "‚ùå C'est incorrect. La formation couvre un champ beaucoup plus large que les seuls aspects fiscaux, incluant les variables sociales et contractuelles. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Automatiser enti√®rement le processus de paie sans intervention humaine.",
                            "rationale": "‚ùå C'est incorrect. Bien que les outils digitaux aident, la rigueur et l'intervention humaine restent cruciales pour la collecte et le contr√¥le des variables. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La gestion des variables de paie implique uniquement des comp√©tences techniques en calcul.",
                    "hint": "Pensez √† l'aspect relationnel et humain de la fonction.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document souligne que la gestion des variables de paie demande √† la fois de la rigueur technique et des qualit√©s humaines, car le gestionnaire est un interlocuteur privil√©gi√© des salari√©s. ü§ù",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La gestion des variables de paie ne se limite pas aux comp√©tences techniques. Elle requiert √©galement des qualit√©s humaines et relationnelles, car le gestionnaire de paie est un interlocuteur cl√© pour les salari√©s et doit faire preuve de rigueur et de tact. üí°",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Selon le document, quelle est l'une des t√¢ches fondamentales qu'un gestionnaire de paie doit ma√Ætriser pour le calcul des variables ?",
                    "hint": "Pensez √† la premi√®re √©tape du processus de paie.",
                    "answerOptions": [
                        {
                            "text": "‚ú® La n√©gociation des salaires des nouveaux employ√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH, mais pas directement du calcul des variables de paie. üíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® L'identification des outils et donn√©es comptables n√©cessaires.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. L'identification des outils et donn√©es comptables est une comp√©tence fondamentale √† ma√Ætriser pour la collecte et le calcul des variables de paie, assurant ainsi la pr√©cision des donn√©es. üìä",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La gestion des litiges avec les organismes sociaux.",
                            "rationale": "‚ùå C'est une t√¢che qui peut d√©couler d'erreurs, mais pas une comp√©tence fondamentale de *calcul* des variables. ‚öñÔ∏è",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La cr√©ation de nouveaux r√©gimes de mutuelle d'entreprise.",
                            "rationale": "‚ùå C'est une t√¢che qui rel√®ve de la politique RH et non du calcul des variables. üè•",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi est-il crucial pour un gestionnaire de paie de bien recueillir les informations pr√©alables √† la paie ?",
                    "hint": "Pensez aux cons√©quences d'informations incorrectes.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Pour augmenter le salaire des employ√©s.",
                            "rationale": "‚ùå C'est incorrect. Le but est la justesse de la paie, pas son augmentation syst√©matique. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Pour √©viter le stress inutile et les risques d'erreurs ou de manquements.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Un bon recueil des informations pr√©alables est fondamental pour √©viter le stress inutile, les risques d'erreurs ou de manquements, et pour garantir la conformit√© et la qualit√© du processus de paie. ü§Øüö´",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Pour r√©duire le nombre d'heures travaill√©es.",
                            "rationale": "‚ùå C'est incorrect. La collecte des variables est li√©e √† la r√©mun√©ration du temps de travail effectif, pas √† sa r√©duction. ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Pour automatiser toutes les t√¢ches de la paie.",
                            "rationale": "‚ùå C'est incorrect. Bien que les outils digitaux aident, la rigueur et l'intervention humaine restent cruciales pour la collecte et le contr√¥le des variables. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Les outils digitaux ont rendu la compr√©hension des obligations et des variables recueillies obsol√®te pour le gestionnaire de paie.",
                    "hint": "Les outils facilitent, mais ne remplacent pas toujours l'expertise.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document indique que, malgr√© l'existence de nombreux outils digitaux, il est indispensable d'avoir une bonne compr√©hension des obligations et des variables recueillies pour une bonne gestion de laie. Les outils sont des aides, pas des substituts √† la connaissance. üí°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document insiste sur le fait qu'il est fondamental d'avoir une bonne compr√©hension des obligations et des variables recueillies, m√™me avec l'aide des outils digitaux. Ces outils facilitent la t√¢che, mais ne remplacent pas l'expertise du gestionnaire. üß†",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Quel est le r√¥le principal d'un gestionnaire de paie dans une entreprise, au-del√† du simple calcul ?",
                    "hint": "Pensez √† sa position au sein de la mission RH.",
                    "answerOptions": [
                        {
                            "text": "‚ú® G√©rer les recrutements et les d√©parts de salari√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH, mais pas le r√¥le principal du gestionnaire de paie. üíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Contribuer √† la continuit√© des r√©mun√©rations et alerter sur d'√©ventuelles situations √† risque.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le gestionnaire de paie participe √† la mission RH de l'entreprise en contribuant √† la continuit√© des r√©mun√©rations et en alertant sur d'√©ventuelles situations √† risque, assurant ainsi la conformit√© et la qualit√© du processus. üõ°Ô∏è",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® D√©finir la politique de r√©mun√©ration de l'entreprise.",
                            "rationale": "‚ùå C'est une t√¢che de la direction ou des RH, pas du gestionnaire de paie. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Organiser les formations professionnelles des salari√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH ou de la direction, non du gestionnaire de paie. üéì",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La p√©dagogie de la l√©gislation applicable est une √©tape secondaire dans la r√©alisation des calculs de paie.",
                    "hint": "La compr√©hension de la loi est essentielle pour la justesse.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur le fait que la p√©dagogie de la l√©gislation applicable est une √©tape cruciale pour garantir la justesse des calculs de paie. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La p√©dagogie de la l√©gislation applicable est une √©tape fondamentale et non secondaire pour la r√©alisation des calculs de paie, assurant leur conformit√© et leur exactitude. üìò",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Quelles sont les trois questions essentielles auxquelles une bonne pratique de la collecte et du calcul des variables de paie doit permettre de r√©pondre ?",
                    "hint": "Pensez √† la conformit√©, √† la sp√©cificit√© et √† l'int√©gration.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Comment r√©duire les co√ªts de personnel, comment augmenter les profits, et comment g√©rer les conflits sociaux ?",
                            "rationale": "‚ùå Ces questions sont li√©es √† la gestion d'entreprise mais ne sont pas celles sp√©cifiques √† la collecte et au calcul des variables de paie mentionn√©es. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Les variables transmises sont-elles correctement int√©gr√©es et analys√©es ? Quelles dispositions sont applicables selon les sp√©cificit√©s du salari√© ? Les documents et justificatifs sont-ils conformes et r√©glementaires ?",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que ces trois questions sont au c≈ìur d'une bonne pratique de la collecte et du calcul des variables de paie, assurant la conformit√© et la justesse de la r√©mun√©ration. üìäüìú",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Comment recruter de nouveaux talents, comment former les √©quipes, et comment √©valuer la performance ?",
                            "rationale": "‚ùå Ces questions sont li√©es aux RH, mais pas directement √† la collecte et au calcul des variables de paie. üßë‚Äçüíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Quelle est la meilleure m√©thode de paiement, quel est le d√©lai de prescription, et comment g√©rer les acomptes ?",
                            "rationale": "‚ùå Ces questions sont sp√©cifiques au r√®glement du salaire, mais pas √† la collecte et au calcul des variables de paie dans leur ensemble. üí°",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Un gestionnaire de paie n'a pas besoin de conna√Ætre les sp√©cificit√©s contractuelles de chaque salari√© pour calculer correctement la paie.",
                    "hint": "Chaque contrat peut avoir des clauses particuli√®res.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur l'importance de la 'sp√©cificit√© professionnelle et contractuelle' pour correctement cr√©er le bulletin de paie. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le gestionnaire de paie doit imp√©rativement conna√Ætre les sp√©cificit√©s contractuelles de chaque salari√© (dur√©e du travail, primes, etc.) pour calculer une paie juste et conforme. üìú",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Quel est le risque pour un gestionnaire de paie qui ne recueille pas correctement les informations pr√©alables, selon le document ?",
                    "hint": "Pensez aux cons√©quences sur la gestion de la paie et le bien-√™tre.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Une augmentation de son propre salaire.",
                            "rationale": "‚ùå C'est une cons√©quence peu probable d'une mauvaise ma√Ætrise g√©n√©rale des comp√©tences. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Un stress inutile et des risques d'erreurs ou de manquements dans les bulletins.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Un mauvais recueil d'informations peut entra√Æner un stress inutile pour le gestionnaire de paie et des risques √©lev√©s d'erreurs ou de manquements dans les bulletins, ce qui peut avoir des cons√©quences financi√®res et l√©gales pour l'entreprise. ü§Ø",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Une r√©duction de la charge de travail.",
                            "rationale": "‚ùå C'est incorrect. Au contraire, les erreurs peuvent augmenter la charge de travail (corrections, litiges). ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Une promotion automatique.",
                            "rationale": "‚ùå C'est incorrect. Un manque de rigueur dans cette t√¢che essentielle ne m√®nerait pas √† une promotion. üöÄ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Quel est l'un des √©l√©ments fondamentaux d'une bonne gestion de la paie mentionn√© dans le document, li√© aux donn√©es remont√©es ?",
                    "hint": "Il s'agit de la qualit√© de ces donn√©es.",
                    "answerOptions": [
                        {
                            "text": "‚ú® La quantit√© de donn√©es collect√©es.",
                            "rationale": "‚ùå C'est incorrect. La quantit√© n'est pas aussi importante que la qualit√© des donn√©es. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La rapidit√© de la collecte des donn√©es.",
                            "rationale": "‚ùå C'est important, mais la qualit√© des donn√©es est primordiale. ‚ö°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La justesse des donn√©es remont√©es.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que la justesse des donn√©es remont√©es par la paie est l'un des √©l√©ments constitutifs d'une bonne gestion de la paie. üéØ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La complexit√© des outils de collecte.",
                            "rationale": "‚ùå C'est incorrect. La complexit√© des outils n'est pas un objectif en soi. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La formation √† la collecte et au calcul des variables de paie est un processus rapide qui ne n√©cessite pas de pratique r√©guli√®re.",
                    "hint": "La ma√Ætrise des comp√©tences fondamentales demande du temps et de l'application.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur la n√©cessit√© de 'ma√Ætriser l'ensemble des comp√©tences n√©cessaires √† cette activit√©', ce qui implique un apprentissage continu et de la pratique. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La formation et la ma√Ætrise des comp√©tences en paie n√©cessitent du temps, de la pratique r√©guli√®re et une veille constante pour rester √† jour avec la l√©gislation. üß†",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Quel type d'outils est mentionn√© dans le document comme pouvant aider √† organiser le recueil d'informations pour la paie ?",
                    "hint": "Pensez aux technologies modernes.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Des cahiers et des stylos.",
                            "rationale": "‚ùå C'est une m√©thode traditionnelle, mais le document mentionne des outils plus modernes. ‚úçÔ∏è",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des outils digitaux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document mentionne que de nombreux outils digitaux existent et peuvent aider √† organiser le recueil d'informations pour la paie, facilitant ainsi la gestion. üíª",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Des tablettes d'argile.",
                            "rationale": "‚ùå C'est une r√©f√©rence historique, mais pas un outil moderne de paie. üóø",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des machines √† √©crire.",
                            "rationale": "‚ùå C'est une technologie obsol√®te pour la paie moderne. üñ®Ô∏è",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi la formation √† la collecte et au calcul des variables de paie est-elle 'incontournable' pour un futur professionnel de la paie ?",
                    "hint": "Pensez √† l'importance de cette activit√© dans le m√©tier.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Pour pouvoir travailler √† l'√©tranger uniquement.",
                            "rationale": "‚ùå C'est incorrect. La formation est essentielle pour la pratique en France √©galement. üåç",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Car c'est une activit√© secondaire et facile √† apprendre sur le tas.",
                            "rationale": "‚ùå C'est incorrect. Le document la pr√©sente comme une activit√© fondamentale et complexe. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Car elle permet de r√©pondre √† des questions essentielles sur la conformit√© et la r√©mun√©ration juste.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La collecte et le calcul des variables de paie sont incontournables car une bonne pratique permet de r√©pondre √† des questions essentielles sur l'int√©gration et l'analyse des variables, la conformit√© des dispositions applicables et la conformit√© r√©glementaire des documents. üéØ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Pour obtenir une augmentation de salaire garantie.",
                            "rationale": "‚ùå C'est incorrect. C'est une comp√©tence m√©tier, pas une garantie de salaire. üí∞",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Le contr√¥le des justificatifs et des √©l√©ments √† int√©grer aux paies est une comp√©tence essentielle pour un gestionnaire de paie.",
                    "hint": "La v√©rification des pi√®ces est cruciale pour la justesse.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le contr√¥le des justificatifs et des √©l√©ments √† int√©grer aux paies est explicitement mentionn√© comme l'une des comp√©tences fondamentales √† ma√Ætriser pour un gestionnaire de paie, garantissant l'exactitude des bulletins. üßæ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚ùå C'est incorrect. La v√©rification est une √©tape cruciale du processus de paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Quel est le point central de l'activit√© de gestion de paie, selon le document ?",
                    "hint": "C'est le document final remis au salari√©.",
                    "answerOptions": [
                        {
                            "text": "‚ú® La d√©claration sociale nominative (DSN).",
                            "rationale": "‚ùå La DSN est une √©tape importante, mais le document met l'accent sur le document remis au salari√©. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Le bulletin de paie.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que le bulletin de paie constitue le point central de l'activit√© de gestion de paie, car il est le reflet de la r√©mun√©ration et des droits du salari√©. üìÑ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Le contrat de travail.",
                            "rationale": "‚ùå Le contrat de travail est la base, mais le bulletin de paie est le r√©sultat final de la gestion. üìú",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Les entretiens annuels d'√©valuation.",
                            "rationale": "‚ùå C'est une t√¢che RH, sans lien direct avec le point central de la paie. ü§ù",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi la collecte des variables de paie est-elle d√©crite comme n√©cessitant 'rigueur et qualit√©s humaines' ?",
                    "hint": "Pensez aux deux facettes de l'interaction et de la pr√©cision.",
                    "answerOptions": [
                        {
                            "text": "‚ú® La rigueur est pour les calculs, les qualit√©s humaines pour les pauses caf√©.",
                            "rationale": "‚ùå C'est une simplification excessive. Les qualit√©s humaines sont importantes dans l'interaction avec les salari√©s. ‚òï",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La rigueur est n√©cessaire pour la pr√©cision des calculs, et les qualit√©s humaines pour le r√¥le d'interlocuteur privil√©gi√© des salari√©s.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La rigueur est indispensable pour la justesse des calculs et la conformit√© l√©gale, tandis que les qualit√©s humaines sont cruciales car le gestionnaire de paie est un interlocuteur privil√©gi√© des salari√©s, n√©cessitant √©coute et compr√©hension. üß†ü§ù",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La rigueur est pour les employeurs, les qualit√©s humaines pour les employ√©s.",
                            "rationale": "‚ùå C'est incorrect. Ces qualit√©s sont attendues du gestionnaire de paie lui-m√™me. üßë‚Äçüíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Seules les qualit√©s humaines sont importantes, la machine fait le reste.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur l'importance des deux aspects. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Les cong√©s pay√©s et les absences sont des variables de paie qui doivent √™tre g√©r√©es avec pr√©cision.",
                    "hint": "Ces √©l√©ments impactent directement la r√©mun√©ration.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La gestion des p√©riodes de cong√©s et des absences est une des comp√©tences fondamentales √† ma√Ætriser pour le calcul des variables de paie, car elles impactent directement la r√©mun√©ration du salari√©. üìÖ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚ùå C'est incorrect. Ces √©l√©ments sont des variables cruciales en paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Un gestionnaire de paie doit-il s'assurer que les variables transmises sont correctement int√©gr√©es et analys√©es ?",
                    "hint": "Pensez √† la fiabilit√© des donn√©es d'entr√©e.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Oui, c'est une question essentielle de la bonne pratique.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document mentionne explicitement : 'Les variables transmises sont-elles correctement int√©gr√©es et analys√©es ?' comme une question cl√© √† laquelle une bonne pratique de paie doit permettre de r√©pondre. üìä",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Non, ce n'est pas sa responsabilit√© directe.",
                            "rationale": "‚ùå C'est incorrect. L'int√©gration et l'analyse des variables sont au c≈ìur de la responsabilit√© du gestionnaire de paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La paie est une activit√© qui ne n√©cessite pas de veille sociale r√©guli√®re.",
                    "hint": "La l√©gislation √©volue constamment.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. La l√©gislation sociale √©volue constamment, rendant la veille sociale indispensable pour tout professionnel de la paie afin d'assurer la conformit√© des bulletins. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La paie est une activit√© qui n√©cessite une veille sociale r√©guli√®re et constante en raison des √©volutions fr√©quentes de la l√©gislation et de la jurisprudence. üìö",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Quel est l'un des risques majeurs si un gestionnaire de paie ne ma√Ætrise pas les comp√©tences fondamentales de son m√©tier ?",
                    "hint": "Pensez aux cons√©quences d'une paie incorrecte.",
                    "answerOptions": [
                        {
                            "text": "‚ú® Une augmentation inattendue des salaires.",
                            "rationale": "‚ùå C'est une cons√©quence peu probable d'une mauvaise ma√Ætrise g√©n√©rale des comp√©tences. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des erreurs dans les bulletins de paie et des litiges avec les salari√©s ou les organismes sociaux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Une mauvaise ma√Ætrise des comp√©tences fondamentales peut entra√Æner des erreurs dans les bulletins de paie, des non-conformit√©s, et potentiellement des litiges avec les salari√©s, l'URSSAF ou d'autres organismes sociaux. ü§Ø‚öñÔ∏è",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Une r√©duction de la charge de travail.",
                            "rationale": "‚ùå C'est incorrect. Au contraire, les erreurs peuvent augmenter la charge de travail (corrections, litiges). ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Une promotion automatique.",
                            "rationale": "‚ùå C'est incorrect. Un manque de comp√©tence n'entra√Æne pas de promotion. üöÄ",
                            "isCorrect": false
                        }
                    ]
                }
            ]
        };

        let currentQuestionIndex = 0; // Tracks the current question being displayed
        let score = 0; // Stores the user's score
        // Stores the index of the user's selected answer for each question (original index)
        let userAnswers = new Array(quizData.questions.length).fill(null);
        // Tracks if a question was answered correctly on the first attempt
        let answeredCorrectly = new Array(quizData.questions.length).fill(false);

        // Get references to DOM elements
        const quizContainer = document.getElementById('quiz');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const restartButton = document.getElementById('restartButton');
        const progressBar = document.getElementById('progressBar');
        const liveScoreDisplay = document.getElementById('liveScoreDisplay');
        const correctProgressElement = document.getElementById('correctProgress');
        const incorrectProgressElement = document.getElementById('incorrectProgress');
        const unansweredProgressElement = document.getElementById('unansweredProgress');


        // Function to shuffle an array (Fisher-Yates algorithm)
        // Modified to preserve the original index of each option
        function shuffleArray(array) {
            // Create a copy of the array with the original index
            let indexedArray = array.map((item, index) => ({ item, originalIndex: index }));
            for (let i = indexedArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indexedArray[i], indexedArray[j]] = [indexedArray[j], indexedArray[i]];
            }
            return indexedArray;
        }

        // Function to display the current question and its options
        function displayQuestion() {
            const questionData = quizData.questions[currentQuestionIndex];
            // M√©langer les options en conservant leur index d'origine
            const shuffledOptionsWithOriginalIndex = shuffleArray([...questionData.answerOptions]);

            // Remplir le conteneur du quiz avec le texte de la question, l'indice et les options de r√©ponse
            quizContainer.innerHTML = `
                <div class="question-text">${currentQuestionIndex + 1}. ${questionData.question}</div>
                <div id="answerOptions" class="flex flex-col gap-3">
                    ${shuffledOptionsWithOriginalIndex.map(optionWrapper => `
                        <div class="answer-option rounded-xl p-4 cursor-pointer transition-all duration-200 ease-in-out hover:bg-blue-100 hover:shadow-md"
                             data-original-index="${optionWrapper.originalIndex}"
                             onclick="selectAnswer(this, ${optionWrapper.originalIndex})">
                            ${optionWrapper.item.text}
                        </div>
                    `).join('')}
                </div>
                <div id="hint" class="hint-text hidden mt-4">Indice : ${questionData.hint}</div>
                <div id="rationaleContainer" class="mt-4 hidden"></div>
            `;

            // Si l'utilisateur a d√©j√† r√©pondu √† cette question, restaurer sa s√©lection et afficher la justification
            if (userAnswers[currentQuestionIndex] !== null) {
                const selectedOptionElement = quizContainer.querySelector(`[data-original-index="${userAnswers[currentQuestionIndex]}"]`);
                if (selectedOptionElement) {
                    // Appliquer la logique de showRationale pour restaurer les couleurs et justifications
                    showRationale(selectedOptionElement, userAnswers[currentQuestionIndex]);
                }
            }

            // Mettre √† jour l'√©tat des boutons de navigation et la barre de progression
            updateNavigationButtons();
            updateProgressBar();
            updateLiveScoreDisplay(); // Mettre √† jour l'affichage du score en direct
        }

        // Function to handle answer selection by the user
        function selectAnswer(selectedElement, originalSelectedIndex) {
            // Si la question a d√©j√† √©t√© r√©pondu, emp√™cher une nouvelle s√©lection
            if (userAnswers[currentQuestionIndex] !== null) {
                return;
            }

            // Stocker l'index D'ORIGINE de la r√©ponse s√©lectionn√©e
            userAnswers[currentQuestionIndex] = originalSelectedIndex;

            // Appliquer la logique de showRationale pour afficher les couleurs et justifications
            showRationale(selectedElement, originalSelectedIndex);
        }

        // Function to show rationale for all options and update the score
        function showRationale(selectedElement, originalSelectedIndex) {
            const questionData = quizData.questions[currentQuestionIndex];
            const allOptionsElements = quizContainer.querySelectorAll('.answer-option');
            const rationaleContainer = document.getElementById('rationaleContainer');
            rationaleContainer.innerHTML = '';

            let isCurrentAnswerCorrect = false; // Pour savoir si la r√©ponse s√©lectionn√©e est correcte

            allOptionsElements.forEach(optionElement => {
                const optionOriginalIndex = parseInt(optionElement.dataset.originalIndex);
                const optionData = questionData.answerOptions[optionOriginalIndex];
                const isCorrectOption = optionData.isCorrect;
                const rationaleText = optionData.rationale;

                // Nettoyer toutes les classes de couleur avant d'appliquer les nouvelles
                optionElement.classList.remove('selected', 'correct', 'incorrect');

                // Cr√©er un div pour la justification de chaque option
                const rationaleDiv = document.createElement('div');
                rationaleDiv.classList.add('rationale', 'rounded-lg', 'p-3', 'mb-2');
                rationaleDiv.innerHTML = `<strong>${optionElement.innerText}:</strong> ${rationaleText}`;

                // Logique de couleur pour les options de r√©ponse (l'√©l√©ment cliqu√© et les autres)
                if (optionOriginalIndex === originalSelectedIndex) {
                    // C'est l'option s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('selected'); // Jaune pour l'option s√©lectionn√©e
                    if (isCorrectOption) {
                        isCurrentAnswerCorrect = true;
                        // Si la r√©ponse s√©lectionn√©e est correcte, sa justification est bleue
                        rationaleDiv.classList.add('correct-rationale');
                    } else {
                        // Si la r√©ponse s√©lectionn√©e est incorrecte, sa justification est jaune
                        rationaleDiv.classList.add('selected-rationale');
                    }
                } else if (isCorrectOption) {
                    // C'est la bonne r√©ponse, mais non s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('correct'); // Bleu pour la bonne r√©ponse non s√©lectionn√©e
                    rationaleDiv.classList.add('correct-rationale'); // Bleu pour sa justification
                } else {
                    // C'est une mauvaise r√©ponse, non s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('incorrect'); // Fuchsia pour les mauvaises r√©ponses non s√©lectionn√©es
                    rationaleDiv.classList.add('incorrect-rationale'); // Fuchsia pour sa justification
                }

                rationaleContainer.appendChild(rationaleDiv);
            });

            // Mettre √† jour le score et le statut `answeredCorrectly`
            if (userAnswers[currentQuestionIndex] !== null && answeredCorrectly[currentQuestionIndex] === false) {
                if (isCurrentAnswerCorrect) {
                    score++;
                    answeredCorrectly[currentQuestionIndex] = true;
                }
            }

            updateLiveScoreDisplay();
            updateProgressBar(); // Mettre √† jour la barre de progression apr√®s la s√©lection
            rationaleContainer.classList.remove('hidden');
            allOptionsElements.forEach(option => option.style.pointerEvents = 'none'); // D√©sactiver les clics apr√®s la s√©lection
            nextButton.disabled = false;
        }

        // Fonction pour mettre √† jour l'√©tat des boutons de navigation (Pr√©c√©dent/Suivant)
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            // Le bouton Suivant est d√©sactiv√© si la question actuelle n'a pas encore √©t√© r√©pondu
            nextButton.disabled = userAnswers[currentQuestionIndex] === null;
            nextButton.textContent = currentQuestionIndex === quizData.questions.length - 1 ? 'Voir les r√©sultats' : 'Suivant';
        }

        // Fonction pour mettre √† jour la barre de progression color√©e
        function updateProgressBar() {
            const totalQuestions = quizData.questions.length;
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            for (let i = 0; i < totalQuestions; i++) {
                if (userAnswers[i] !== null) {
                    const originalOptionIndex = userAnswers[i];
                    const isCorrect = quizData.questions[i].answerOptions[originalOptionIndex].isCorrect;
                    if (isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                } else {
                    unansweredCount++;
                }
            }

            const correctPercentage = (correctCount / totalQuestions) * 100;
            const incorrectPercentage = (incorrectCount / totalQuestions) * 100;
            const unansweredPercentage = (unansweredCount / totalQuestions) * 100;

            correctProgressElement.style.width = `${correctPercentage}%`;
            incorrectProgressElement.style.width = `${incorrectPercentage}%`;
            unansweredProgressElement.style.width = `${unansweredPercentage}%`;

            // Afficher les pourcentages √† l'int√©rieur des sections si > 0
            correctProgressElement.textContent = correctPercentage > 0 ? `${correctPercentage.toFixed(0)}%` : '';
            incorrectProgressElement.textContent = incorrectPercentage > 0 ? `${incorrectPercentage.toFixed(0)}%` : '';
            unansweredProgressElement.textContent = unansweredPercentage > 0 ? `${unansweredPercentage.toFixed(0)}%` : '';
        }

        // Fonction pour mettre √† jour l'affichage du score en direct
        function updateLiveScoreDisplay() {
            const totalQuestions = quizData.questions.length;
            const currentQuestionNumber = currentQuestionIndex + 1;
            const answeredCount = userAnswers.filter(answer => answer !== null).length; // Compte les questions auxquelles une r√©ponse a √©t√© donn√©e

            let correctCount = 0;
            let incorrectCount = 0;

            for (let i = 0; i < answeredCount; i++) {
                if (userAnswers[i] !== null) {
                    const originalOptionIndex = userAnswers[i];
                    const isCorrect = quizData.questions[i].answerOptions[originalOptionIndex].isCorrect;
                    if (isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            }
            
            let percentageCorrect = 0;
            let percentageIncorrect = 0;

            if (answeredCount > 0) {
                percentageCorrect = ((correctCount / answeredCount) * 100).toFixed(0);
                percentageIncorrect = ((incorrectCount / answeredCount) * 100).toFixed(0);
            }

            liveScoreDisplay.textContent = `Score : ${correctCount} / ${answeredCount} (${percentageCorrect}% de r√©ussite, ${percentageIncorrect}% d'√©checs) - Question ${currentQuestionNumber} / ${totalQuestions}`;
        }

        // Fonction pour afficher les r√©sultats finaux du quiz
        function showResults() {
            const totalQuestions = quizData.questions.length;
            let finalCorrectCount = 0;
            let finalIncorrectCount = 0;
            let finalUnansweredCount = 0;

            for (let i = 0; i < totalQuestions; i++) {
                if (userAnswers[i] !== null) {
                    const originalOptionIndex = userAnswers[i];
                    const isCorrect = quizData.questions[i].answerOptions[originalOptionIndex].isCorrect;
                    if (isCorrect) {
                        finalCorrectCount++;
                    } else {
                        finalIncorrectCount++;
                    }
                } else {
                    finalUnansweredCount++;
                }
            }

            const finalCorrectPercentage = ((finalCorrectCount / totalQuestions) * 100).toFixed(0);
            const finalIncorrectPercentage = ((finalIncorrectCount / totalQuestions) * 100).toFixed(0);
            const finalUnansweredPercentage = ((finalUnansweredCount / totalQuestions) * 100).toFixed(0);

            let feedbackMessage = "";
            let celebrationContent = "";
            let shareFeedbackMessage = ""; // Specific message for sharing

            if (finalCorrectPercentage <= 25) {
                feedbackMessage = `Votre score de ${finalCorrectPercentage}% de r√©ussite est un bon d√©but. Il est temps de revoir vos cours ! Continuez votre apprentissage en pratiquant et en regardant les lives. C'est essentiel pour progresser. üìöüí°`;
                shareFeedbackMessage = `Mon r√©sultat est de ${finalCorrectPercentage}% de r√©ussite. Il est temps de revoir mes cours et de progresser !`;
            } else if (finalCorrectPercentage <= 50) {
                feedbackMessage = `Votre score de ${finalCorrectPercentage}% de r√©ussite est encourageant. C'est bien, continuez ainsi ! Le prochain palier est 75%. Pour y arriver, continuez √† progresser, suivez les lives, appliquez les concepts et faites de la veille sociale. üí™üöÄ`;
                shareFeedbackMessage = `Mon score est de ${finalCorrectPercentage}% de r√©ussite. C'est encourageant, mais je vise plus haut !`;
            } else if (finalCorrectPercentage <= 75) {
                feedbackMessage = `F√©licitations pour votre score de ${finalCorrectPercentage}% de r√©ussite ! Vos efforts portent leurs fruits. Vous pouvez continuer √† vous performer et viser l'excellence. üåüüéØ`;
                shareFeedbackMessage = `J'ai obtenu ${finalCorrectPercentage}% de r√©ussite ! Tr√®s bon score, je continue de m'am√©liorer !`;
            } else { // > 75% up to 100%
                feedbackMessage = `F√©licitations pour votre score de ${finalCorrectPercentage}% de r√©ussite ! üéâüî• Vous ma√Ætrisez le sujet ! N'oubliez pas que nous sommes une √©quipe, motivez la troupe et le transfert de comp√©tences est important : aidez les autres personnes. üèÖüéì`;
                celebrationContent = `
                    <p class="text-2xl font-bold text-yellow-500 mt-4">üéâüî• M√âDAILLE D'OR ! üî•üéâ</p>
                    <p class="text-xl font-semibold text-blue-600">Dipl√¥me de Ma√Ætrise du R√®glement du Salaire !</p>
                `;
                shareFeedbackMessage = `J'ai atteint ${finalCorrectPercentage}% de r√©ussite ! C'est la f√™te ! Je suis pr√™t √† partager mes connaissances et √† motiver la troupe !`;
            }

            // Get the quiz title from the <title> tag
            const quizTitle = document.title;
            // Construct the shareable message for Discord/WhatsApp
            const shareMessage = `Voici les r√©sultats obtenus lors de mon test quiz "${quizTitle}" ! J'ai eu ${finalCorrectPercentage}% de r√©ussite. ${shareFeedbackMessage} Pr√™ts √† √©changer sur Discord/WhatsApp pour progresser ensemble ?`;

            quizContainer.innerHTML = `
                <div class="score-display">Votre score final : ${finalCorrectCount} sur ${totalQuestions}</div>
                <p class="text-lg text-gray-700 mb-4">Un aper√ßu de votre performance :</p>

                <div class="progress-bar final-results-chart-container">
                    <div class="progress-section correct-section" style="width: ${finalCorrectPercentage}%;">
                        ${finalCorrectPercentage > 0 ? `${finalCorrectPercentage}%` : ''}
                    </div>
                </div>

                <p class="text-xl font-semibold text-gray-800 mt-6">${feedbackMessage}</p>
                ${celebrationContent}
                <div class="mt-8 p-4 bg-gray-100 rounded-lg shadow-inner">
                    <p class="text-lg font-semibold text-gray-700 mb-2">Partagez vos r√©sultats et √©changez !</p>
                    <textarea id="shareableResult" class="w-full p-2 border rounded-md text-gray-700 bg-gray-50 mb-4" rows="4" readonly>${shareMessage}</textarea>
                    <button id="copyResultButton" class="button bg-green-500 hover:bg-green-600 mb-4">Copier le message de partage</button>
                    <p class="text-md text-gray-600 mb-2">Rejoignez la discussion sur :</p>
                    <a href="https://discord.com/channels/1390693097033175060/1391491121061826582" target="_blank" class="inline-block mt-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                        Discord ‚ú®„Éªespace-papotage
                    </a>
                    <a href="https://chat.whatsapp.com/FuBgQZStV0r2dgIDxJe2g9" target="_blank" class="inline-block mt-2 ml-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                        WhatsApp üî• | Payroll Boss Elite Club üëë
                    </a>
                </div>
            `;

            // Add copy to clipboard functionality
            document.getElementById('copyResultButton').addEventListener('click', () => {
                const shareableResult = document.getElementById('shareableResult');
                shareableResult.select();
                document.execCommand('copy');
                // Optional: Provide visual feedback that text has been copied
                shareableResult.style.borderColor = '#10B981'; // Green border
                shareableResult.style.boxShadow = '0 0 0 2px #10B981';
                setTimeout(() => {
                    shareableResult.style.borderColor = '';
                    shareableResult.style.boxShadow = '';
                }, 1500);
            });

            // Hide navigation buttons and show restart button
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            restartButton.classList.remove('hidden');
            liveScoreDisplay.classList.add('hidden'); // Hide live score display at the end
        }

        // √âcouteur d'√©v√©nement pour le bouton 'Suivant'
        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.questions.length - 1) {
                currentQuestionIndex++; // Passer √† la question suivante
                displayQuestion(); // Afficher la nouvelle question
            } else {
                showResults(); // Si c'est la derni√®re question, afficher les r√©sultats
            }
        });

        // √âcouteur d'√©v√©nement pour le bouton 'Pr√©c√©dent'
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--; // Revenir √† la question pr√©c√©dente
                displayQuestion(); // Afficher la nouvelle question
            } else {
                // If on the first question and trying to go back, just re-display it
                displayQuestion();
            }
        });

        // √âcouteur d'√©v√©nement pour le bouton 'Recommencer le Quiz'
        restartButton.addEventListener('click', () => {
            currentQuestionIndex = 0; // R√©initialiser l'index de la question
            score = 0; // R√©initialiser le score
            userAnswers.fill(null); // Effacer les r√©ponses de l'utilisateur
            answeredCorrectly.fill(false); // R√©initialiser le suivi de la justesse
            // Afficher les boutons de navigation et cacher le bouton de red√©marrage
            prevButton.classList.remove('hidden');
            nextButton.classList.remove('hidden');
            restartButton.classList.add('hidden');
            liveScoreDisplay.classList.remove('hidden'); // R√©afficher l'affichage du score en direct
            displayQuestion(); // Commencer le quiz depuis le d√©but
        });

        // Affichage initial de la premi√®re question au chargement de la page
        displayQuestion();
    </script>
</body>
</html>
