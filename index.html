<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Styles de base pour le corps de la page */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #dbeafe; /* Fond bleu tr√®s clair (Tailwind blue-50) */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Hauteur minimale de la fen√™tre */
            padding: 20px;
            box-sizing: border-box;
        }
        /* Conteneur principal du quiz */
        .quiz-container {
            background-color: #ffffff; /* Fond blanc */
            border-radius: 15px; /* Coins arrondis */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); /* Ombre douce */
            padding: 30px;
            max-width: 800px; /* Largeur maximale pour la lisibilit√© */
            width: 100%; /* Pleine largeur sur petits √©crans */
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 20px; /* Espacement entre les √©l√©ments */
        }
        /* Style du texte de la question */
        .question-text {
            font-size: 1.5rem; /* Taille de police plus grande */
            font-weight: 600; /* Semi-gras */
            color: #333; /* Texte gris fonc√© */
            margin-bottom: 20px;
        }
        /* Style des options de r√©ponse individuelles */
        .answer-option {
            background-color: #e2e8f0; /* Gris-bleu clair */
            border-radius: 10px; /* Coins arrondis */
            padding: 15px 20px;
            margin-bottom: 10px;
            cursor: pointer; /* Indique que l'√©l√©ment est clickable */
            transition: background-color 0.3s ease, transform 0.2s ease; /* Transitions douces */
            text-align: left;
            font-size: 1.1rem;
            color: #4a5568; /* Texte gris moyen */
            border: 2px solid transparent; /* Bordure transparente pour la s√©lection */
        }
        /* Effet au survol des options de r√©ponse */
        .answer-option:hover {
            background-color: #93c5fd; /* Bleu plus doux (Tailwind blue-300) au survol */
            transform: translateY(-2px); /* L√©ger effet de soul√®vement */
        }
        /* Style de l'option de r√©ponse correcte */
        .answer-option.correct {
            background-color: #bfdbfe; /* Bleu-200 */
            border-color: #3b82f6; /* Bleu-500 */
        }
        /* Style de l'option de r√©ponse incorrecte */
        .answer-option.incorrect {
            background-color: #fce7f6; /* Pink-100 (plus clair) */
            border-color: #ec4899; /* Pink-500 (plus fuchsia) */
        }
        /* Style de l'option de r√©ponse s√©lectionn√©e par l'utilisateur */
        .answer-option.selected {
            background-color: #fffef0; /* Jaune-100 */
            border-color: #eab308; /* Jaune-500 */
        }
        /* Style du texte de la justification (rationale) */
        .rationale {
            font-size: 0.95rem;
            margin-top: 5px;
            padding: 10px;
            border-radius: 8px;
            text-align: left;
            color: #4a5568;
            background-color: #f0f2f5;
            border-left: 4px solid #60a5fa; /* Bordure gauche bleue-400 */
        }
        /* Style sp√©cifique de la justification pour les r√©ponses correctes */
        .rationale.correct-rationale {
            border-left-color: #3b82f6; /* Bleu-500 */
            background-color: #e0f2fe; /* Bleu-100 */
        }
        /* Style sp√©cifique de la justification pour les r√©ponses incorrectes */
        .rationale.incorrect-rationale {
            border-left-color: #ec4899; /* Pink-500 (plus fuchsia) */
            background-color: #fce7f6; /* Pink-100 (plus clair) */
        }
        /* Style sp√©cifique de la justification pour la r√©ponse s√©lectionn√©e par l'utilisateur */
        .rationale.selected-rationale {
            border-left-color: #eab308; /* Jaune-500 */
            background-color: #fffef0; /* Jaune-100 */
        }
        /* Style g√©n√©ral des boutons */
        .button {
            background-color: #1d4ed8; /* Fond bleu profond (Tailwind blue-700) */
            color: white; /* Texte blanc */
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 500;
            transition: background-color 0.3s ease, transform 0.2s ease; /* Transitions douces */
            border: none;
            box-shadow: 0 4px 10px rgba(66, 153, 225, 0.3); /* Ombre douce */
        }
        /* Effet au survol des boutons */
        .button:hover {
            background-color: #1e40af; /* Bleu plus fonc√© au survol (Tailwind blue-800) */
            transform: translateY(-2px); /* L√©ger effet de soul√®vement */
        }
        /* √âtat d√©sactiv√© des boutons */
        .button:disabled {
            background-color: #a0aec0; /* Gris√© lorsque d√©sactiv√© */
            cursor: not-allowed;
            box-shadow: none;
        }
        /* Conteneur de la barre de progression */
        .progress-bar {
            width: 100%;
            height: 20px; /* Plus √©pais */
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 5px; /* Moins de marge pour rapprocher du score */
            display: flex; /* Utiliser flexbox pour les segments */
            font-weight: bold; /* Texte en gras dans la barre */
            color: white; /* Texte blanc par default pour les sections color√©es */
            font-size: 0.9em; /* Taille du texte dans la barre */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5); /* Ombre pour la lisibilit√© */
        }
        /* Sections de la barre de progression et du graphique final */
        .progress-section {
            height: 100%;
            display: flex; /* Pour centrer le texte */
            align-items: center;
            justify-content: center;
            transition: width 0.3s ease-in-out; /* Transition de largeur douce */
            box-sizing: border-box; /* Pour inclure padding/border dans la largeur */
        }
        .correct-section { background-color: #1d4ed8; } /* Bleu profond (Tailwind blue-700) */
        .incorrect-section { background-color: #ec4899; } /* Fuchsia */
        .unanswered-section { background-color: #93c5fd; color: #4a5568; text-shadow: none; } /* Bleu doux (Tailwind blue-300), texte fonc√© */
        /* Style de l'affichage du score final */
        .score-display {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2d3748; /* Texte gris fonc√© */
            margin-bottom: 20px;
        }
        /* Style du texte de l'indice */
        .hint-text {
            font-style: italic;
            color: #718096; /* Texte gris att√©nu√© */
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .live-score-display {
            font-size: 1.1rem; /* Plus grand */
            font-weight: 600; /* Plus gras */
            color: #333;
            margin-top: 0px; /* Moins de marge pour rapprocher de la barre */
            margin-bottom: 10px;
            text-align: center; /* Centrer le texte */
        }

        /* Style sp√©cifique pour la barre de r√©sultats finaux */
        .final-results-chart-container {
            height: 30px; /* Plus √©pais pour le graphique final */
            margin-top: 20px;
            margin-bottom: 20px;
        }
        /* Pour le graphique final, on ne veut qu'une seule section pour le correct */
        .final-results-chart-container .incorrect-section,
        .final-results-chart-container .unanswered-section {
            display: none; /* Cacher ces sections dans le graphique final */
        }
        .final-results-chart-container .correct-section {
            width: 100% !important; /* Force la section correcte √† prendre toute la largeur disponible */
            justify-content: center; /* Centrer le texte */
        }
        /* Style pour le message de bonus */
        .bonus-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }
        .bonus-message.success {
            background-color: #d1fae5; /* Vert tr√®s clair */
            color: #065f46; /* Vert fonc√© */
            border: 1px solid #34d399;
        }
        .bonus-message.info {
            background-color: #e0f2fe; /* Bleu tr√®s clair */
            color: #2563eb; /* Bleu fonc√© */
            border: 1px solid #60a5fa;
        }

        /* Style pour l'indice interactif */
        .interactive-hint-display {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-style: italic;
            color: #718096; /* Texte gris */
            background-color: #fef3c7; /* Fond jaune tr√®s clair */
            border: 1px solid #fcd34d; /* Bordure jaune */
            text-align: center;
            font-size: 1rem;
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out; /* Transition douce */
        }

        /* Animation de fondu */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Style pour l'indice avant choix */
        .pre-choice-hint {
            margin-top: 10px;
            padding: 10px;
            border-radius: 8px;
            background-color: #f0f9ff; /* Bleu tr√®s tr√®s clair */
            color: #3b82f6; /* Bleu plus prononc√© */
            font-style: italic;
            text-align: center;
            font-size: 0.95rem;
            border: 1px solid #bfdbfe;
        }

        /* Styles pour les logos SVG */
        .footer-links svg {
            width: 1.5rem;
            height: 1.5rem;
            vertical-align: middle;
            display: inline-block; /* Pour aligner avec le texte */
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie</h1>
        <div id="liveScoreDisplay" class="live-score-display"></div>
        <div class="progress-bar" id="progressBar">
            <!-- Sections de progression seront ins√©r√©es ici par JavaScript -->
            <div class="progress-section correct-section" id="correctProgress"></div>
            <div class="progress-section incorrect-section" id="incorrectProgress"></div>
            <div class="progress-section unanswered-section" id="unansweredProgress"></div>
        </div>
        <div id="quiz" class="flex flex-col gap-4">
            <!-- La question et les r√©ponses seront charg√©es ici par JavaScript -->
        </div>
        <div id="navigation" class="flex justify-between mt-6">
            <button id="prevButton" class="button" disabled>Pr√©c√©dent</button>
            <button id="nextButton" class="button">Suivant</button>
        </div>
        <button id="restartButton" class="button mt-6 hidden">Recommencer le Quiz</button>

        <!-- Nouvelle section pour les liens sociaux et le message inspirant -->
        <div class="footer-links mt-8 p-4 bg-gray-100 rounded-lg shadow-inner text-center">
            <p class="text-lg font-semibold text-gray-700 mb-4">
                Rejoignez notre √©quipe pour monter en comp√©tence au niveau de la paie !
            </p>
            <p class="text-sm text-gray-600 mb-4">
                Le monde de la paie est complexe, mais ensemble, nous pouvons le ma√Ætriser.
                Rejoignez notre communaut√© de professionnels passionn√©s pour √©changer, apprendre et progresser.
                Votre expertise de demain commence ici !
            </p>
            <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                <a href="https://discord.gg/cBnBkGDFgk" target="_blank" class="flex items-center bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M20.22 0H3.78C1.7 0 0 1.7 0 3.78v16.44C0 22.3 1.7 24 3.78 24h16.44c2.08 0 3.78-1.7 3.78-3.78V3.78C24 1.7 22.3 0 20.22 0zM17.2 17.5c-.7 0-1.2-.5-1.2-1.2V14c0-.7.5-1.2 1.2-1.2s1.2.5 1.2 1.2v2.3c0 .7-.5 1.2-1.2 1.2zM6.8 17.5c-.7 0-1.2-.5-1.2-1.2V14c0-.7.5-1.2 1.2-1.2s1.2.5 1.2 1.2v2.3c0 .7-.5 1.2-1.2 1.2zM12 19.8c-2.8 0-5.1-2.3-5.1-5.1V9.2c0-2.8 2.3-5.1 5.1-5.1s5.1 2.3 5.1 5.1v5.5c0 2.8-2.3 5.1-5.1 5.1zM12 6.8c-1.4 0-2.5 1.1-2.5 2.5v5.5c0 1.4 1.1 2.5 2.5 2.5s2.5-1.1 2.5-2.5V9.2c0-1.4-1.1-2.5-2.5-2.5z"/>
                    </svg>
                    Discord üî• Payroll Boss Elite Club : Le Hub Paie & Progr√®s üìà
                </a>
                <a href="https://chat.whatsapp.com/EtV0ux5ipAG5JDhopzo0ut" target="_blank" class="flex items-center bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                    <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91c0 1.74.46 3.45 1.32 4.95L2 22l5.25-1.38c1.45.79 3.08 1.21 4.79 1.21 5.46 0 9.91-4.45 9.91-9.91S17.5 2 12.04 2zm.04 18.12c-1.48 0-2.93-.4-4.2-1.16l-.3-.18-3.1 1.02 1.04-3.04-.2-.31c-.8-1.26-1.24-2.7-1.24-4.26 0-4.54 3.7-8.23 8.24-8.23s8.23 3.7 8.23 8.23c0 4.54-3.7 8.24-8.23 8.24zm4.52-6.17c-.25-.12-.92-.46-1.06-.51-.14-.05-.29-.07-.42.07-.14.14-.54.68-.66.82-.12.14-.25.16-.49.06-.24-.1-.99-.36-1.89-1.16-.7-.63-1.17-1.4-1.31-1.64-.14-.25-.01-.38.11-.5-.11-.29-.25-.46-.38-.65-.13-.19-.01-.36.09-.54.08-.14.42-.36.5-.51.08-.14.04-.25-.02-.38-.06-.14-.51-1.99-.7-2.72-.18-.7-.36-.59-.51-.6-.14-.02-.3-.02-.42-.02-.14 0-.36.05-.55.24-.19.19-.72.7-.72 1.71s.74 1.99.84 2.13c.1 0 1.46 2.23 3.54 3.02 1.03.39 1.84.62 2.46.79.97.27 1.25.22 1.7-.06.48-.3 1.46-.6 1.66-.92.2-.3.2-.5.14-.62z"/>
                    </svg>
                    WhatsApp üî• Payroll Boss Elite Club üëë| Infos & Actus
                </a>
            </div>
            <p class="text-sm text-gray-500 mt-4">
                ¬© <span id="currentYear"></span> Le monde de la paie. Tous droits r√©serv√©s.
            </p>
        </div>
    </div>

    <script>
        // Donn√©es du quiz
        const quizData = {
            "questions": [
                // Questions from 01 Comment et pourquoi se former √† la collecte et au calcul des variables de paie
                {
                    "question": "Quel est l'objectif principal de la formation √† la collecte et au calcul des variables de paie pour un futur gestionnaire ?",
                    "hint": "Pensez √† la finalit√© de cette activit√© pour la r√©mun√©ration des salari√©s.",
                    "preChoiceHint": "Un bon gestionnaire de paie, c'est un peu comme un super-h√©ros de la justice salariale ! ü¶∏",
                    "answerOptions": [
                        {
                            "text": "‚ú® Apprendre √† r√©duire le temps de travail des salari√©s.",
                            "rationale": "‚ùå C'est incorrect. L'objectif principal est d'assurer une r√©mun√©ration juste et conforme, pas de r√©duire le temps de travail. üí°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Assurer une r√©mun√©ration juste et conforme au travail effectu√© par les salari√©s.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La formation √† la collecte et au calcul des variables de paie est essentielle pour garantir que les salari√©s soient pay√©s correctement et conform√©ment au travail qu'ils ont effectu√©, √©vitant ainsi les erreurs et les litiges. üìòüí∞",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Ma√Ætriser uniquement les aspects fiscaux de la paie.",
                            "rationale": "‚ùå C'est incorrect. La formation couvre un champ beaucoup plus large que les seuls aspects fiscaux, incluant les variables sociales et contractuelles. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Automatiser enti√®rement le processus de paie sans intervention humaine.",
                            "rationale": "‚ùå C'est incorrect. Bien que les outils digitaux aident, la rigueur et l'intervention humaine restent cruciales pour la collecte et le contr√¥le des variables. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La gestion des variables de paie implique uniquement des comp√©tences techniques en calcul.",
                    "hint": "Pensez √† l'aspect relationnel et humain de la fonction.",
                    "preChoiceHint": "La paie, c'est aussi une affaire de c≈ìur (et de communication) ! ‚ù§Ô∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document souligne que la gestion des variables de paie demande √† la fois de la rigueur technique et des qualit√©s humaines, car le gestionnaire est un interlocuteur privil√©gi√© des salari√©s. ü§ù",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La gestion des variables de paie ne se limite pas aux comp√©tences techniques. Elle requiert √©galement des qualit√©s humaines et relationnelles, car le gestionnaire de paie est un interlocuteur cl√© pour les salari√©s et doit faire preuve de rigueur et de tact. üí°",
                            "isCorrect": true
                        }
                    ]
                },
                {
                    "question": "Selon le document, quelle est l'une des t√¢ches fondamentales qu'un gestionnaire de paie doit ma√Ætriser pour le calcul des variables ?",
                    "hint": "Pensez √† la premi√®re √©tape du processus de paie.",
                    "preChoiceHint": "Avant de construire une maison, on a besoin d'un plan et des bons outils, n'est-ce pas ? üèóÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® La n√©gociation des salaires des nouveaux employ√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH, mais pas directement du calcul des variables de paie. üíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® L'identification des outils et donn√©es comptables n√©cessaires.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. L'identification des outils et donn√©es comptables est une comp√©tence fondamentale √† ma√Ætriser pour la collecte et le calcul des variables de paie, assurant ainsi la pr√©cision des donn√©es. üìä",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La gestion des litiges avec les organismes sociaux.",
                            "rationale": "‚ùå C'est une t√¢che qui peut d√©couler d'erreurs, mais pas une comp√©tence fondamentale de *calcul* des variables. ‚öñÔ∏è",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La cr√©ation de nouveaux r√©gimes de mutuelle d'entreprise.",
                            "rationale": "‚ùå C'est une t√¢che qui rel√®ve de la politique RH et non du calcul des variables. üè•",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi est-il crucial pour un gestionnaire de paie de bien recueillir les informations pr√©alables √† la paie ?",
                    "hint": "Pensez aux cons√©quences d'informations incorrectes.",
                    "preChoiceHint": "Imaginez cuisiner sans les bonnes quantit√©s... catastrophe assur√©e ! üç≥",
                    "answerOptions": [
                        {
                            "text": "‚ú® Pour augmenter le salaire des employ√©s.",
                            "rationale": "‚ùå C'est incorrect. Le but est la justesse de la paie, pas son augmentation syst√©matique. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Pour √©viter le stress inutile et les risques d'erreurs ou de manquements.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Un bon recueil des informations pr√©alables est fondamental pour √©viter le stress inutile, les risques d'erreurs ou de manquements, et pour garantir la conformit√© et la qualit√© du processus de paie. ü§Øüö´",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Pour r√©duire le nombre d'heures travaill√©es.",
                            "rationale": "‚ùå C'est incorrect. La collecte des variables est li√©e √† la r√©mun√©ration du temps de travail effectif, pas √† sa r√©duction. ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Pour automatiser toutes les t√¢ches de la paie.",
                            "rationale": "‚ùå C'est incorrect. Bien que les outils digitaux aident, la rigueur et l'intervention humaine restent cruciales pour la collecte et le contr√¥le des variables. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Les outils digitaux ont rendu la compr√©hension des obligations et des variables recueillies obsol√®te pour le gestionnaire de paie.",
                    "hint": "Les outils facilitent, mais ne remplacent pas toujours l'expertise.",
                    "preChoiceHint": "Un marteau, c'est bien, mais il faut savoir o√π taper ! üî®",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document indique que, malgr√© l'existence de nombreux outils digitaux, il est indispensable d'avoir une bonne compr√©hension des obligations et des variables recueillies pour une bonne gestion de laie. Les outils sont des aides, pas des substituts √† la connaissance. üí°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document insiste sur le fait qu'il est fondamental d'avoir une bonne compr√©hension des obligations et des variables recueillies, m√™me avec l'aide des outils digitaux. Ces outils facilitent la t√¢che, mais ne remplacent pas l'expertise du gestionnaire. üß†",
                            "isCorrect": true
                        }
                    ],
                    "interactiveHint": { "text": "Hmm, m√™me avec un super GPS, vous devez savoir o√π vous allez ! üó∫Ô∏è" }
                },
                {
                    "question": "Quel est le r√¥le principal d'un gestionnaire de paie dans une entreprise, au-del√† du simple calcul ?",
                    "hint": "Pensez √† sa position au sein de la mission RH.",
                    "preChoiceHint": "Le gestionnaire de paie, c'est le chef d'orchestre de la symphonie salariale ! üé∂",
                    "answerOptions": [
                        {
                            "text": "‚ú® G√©rer les recrutements et les d√©parts de salari√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH, mais pas le r√¥le principal du gestionnaire de paie. üíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Contribuer √† la continuit√© des r√©mun√©rations et alerter sur d'√©ventuelles situations √† risque.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le gestionnaire de paie participe √† la mission RH de l'entreprise en contribuant √† la continuit√© des r√©mun√©rations et en alertant sur d'√©ventuelles situations √† risque, assurant ainsi la conformit√© et la qualit√© du processus. üõ°Ô∏è",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® D√©finir la politique de r√©mun√©ration de l'entreprise.",
                            "rationale": "‚ùå C'est une t√¢che de la direction ou des RH, pas du gestionnaire de paie. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Organiser les formations professionnelles des salari√©s.",
                            "rationale": "‚ùå C'est une t√¢che des RH ou de la direction, non du gestionnaire de paie. üéì",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La p√©dagogie de la l√©gislation applicable est une √©tape secondaire dans la r√©alisation des calculs de paie.",
                    "hint": "La compr√©hension de la loi est essentielle pour la justesse.",
                    "preChoiceHint": "Conna√Ætre la loi, c'est la base pour √©viter les ennuis... et les erreurs de paie ! ü§ì",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur le fait que la p√©dagogie de la l√©gislation applicable est une √©tape cruciale pour garantir la justesse des calculs de paie. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La p√©dagogie de la l√©gislation applicable est une √©tape fondamentale et non secondaire pour la r√©alisation des calculs de paie, assurant leur conformit√© et leur exactitude. üìò",
                            "isCorrect": true
                        }
                    ],
                    "interactiveHint": { "text": "La loi, c'est comme la recette : si on ne la suit pas, le plat est immangeable ! ‚öñÔ∏è" }
                },
                {
                    "question": "Quelles sont les trois questions essentielles auxquelles une bonne pratique de la collecte et du calcul des variables de paie doit permettre de r√©pondre ?",
                    "hint": "Pensez √† la conformit√©, √† la sp√©cificit√© et √† l'int√©gration.",
                    "preChoiceHint": "Trois questions pour une paie parfaite, c'est comme les trois mousquetaires de la conformit√© ! ‚öîÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Comment r√©duire les co√ªts de personnel, comment augmenter les profits, et comment g√©rer les conflits sociaux ?",
                            "rationale": "‚ùå Ces questions sont li√©es √† la gestion d'entreprise mais ne sont pas celles sp√©cifiques √† la collecte et au calcul des variables de paie mentionn√©es. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Les variables transmises sont-elles correctement int√©gr√©es et analys√©es ? Quelles dispositions sont applicables selon les sp√©cificit√©s du salari√© ? Les documents et justificatifs sont-ils conformes et r√©glementaires ?",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que ces trois questions sont au c≈ìur d'une bonne pratique de la collecte et du calcul des variables de paie, assurant la conformit√© et la justesse de la r√©mun√©ration. üìäüìú",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Comment recruter de nouveaux talents, comment former les √©quipes, et comment √©valuer la performance ?",
                            "rationale": "‚ùå Ces questions sont li√©es aux RH, mais pas directement √† la collecte et au calcul des variables de paie. üßë‚Äçüíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Quelle est la meilleure m√©thode de paiement, quel est le d√©lai de prescription, et comment g√©rer les acomptes ?",
                            "rationale": "‚ùå Ces questions sont sp√©cifiques au r√®glement du salaire, mais pas √† la collecte et au calcul des variables de paie dans leur ensemble. üí°",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Un gestionnaire de paie n'a pas besoin de conna√Ætre les sp√©cificit√©s contractuelles de chaque salari√© pour calculer correctement la paie.",
                    "hint": "Chaque contrat peut avoir des clauses particuli√®res.",
                    "preChoiceHint": "Chaque contrat est une histoire unique, et le gestionnaire de paie doit en √™tre le narrateur pr√©cis ! üìñ",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur l'importance de la 'sp√©cificit√© professionnelle et contractuelle' pour correctement cr√©er le bulletin de paie. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le gestionnaire de paie doit imp√©rativement conna√Ætre les sp√©cificit√©s contractuelles de chaque salari√© (dur√©e du travail, primes, etc.) pour calculer une paie juste et conforme. üìú",
                            "isCorrect": true
                        }
                    ],
                    "interactiveHint": { "text": "Chaque salari√© est unique, comme un flocon de neige... ou un bulletin de paie ! ‚ùÑÔ∏è" }
                },
                {
                    "question": "Quel est le risque pour un gestionnaire de paie qui ne recueille pas correctement les informations pr√©alables, selon le document ?",
                    "hint": "Pensez aux cons√©quences sur la gestion de la paie et le bien-√™tre.",
                    "preChoiceHint": "Une petite erreur de saisie peut vite devenir un gros casse-t√™te ! ü§Ø",
                    "answerOptions": [
                        {
                            "text": "‚ú® Une augmentation de son propre salaire.",
                            "rationale": "‚ùå C'est une cons√©quence peu probable d'une mauvaise ma√Ætrise g√©n√©rale des comp√©tences. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Un stress inutile et des risques d'erreurs ou de manquements dans les bulletins.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Un mauvais recueil d'informations peut entra√Æner un stress inutile pour le gestionnaire de paie et des risques √©lev√©s d'erreurs ou de manquements dans les bulletins, ce qui peut avoir des cons√©quences financi√®res et l√©gales pour l'entreprise. ü§Ø",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Une r√©duction de la charge de travail.",
                            "rationale": "‚ùå C'est incorrect. Au contraire, les erreurs peuvent augmenter la charge de travail (corrections, litiges). ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Une promotion automatique.",
                            "rationale": "‚ùå C'est incorrect. Un manque de rigueur dans cette t√¢che essentielle ne m√®nerait pas √† une promotion. ÔøΩ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Quel est l'un des √©l√©ments fondamentaux d'une bonne gestion de la paie mentionn√© dans le document, li√© aux donn√©es remont√©es ?",
                    "hint": "Il s'agit de la qualit√© de ces donn√©es.",
                    "preChoiceHint": "La qualit√© des donn√©es, c'est la cl√© de vo√ªte de la paie ! üîë",
                    "answerOptions": [
                        {
                            "text": "‚ú® La quantit√© de donn√©es collect√©es.",
                            "rationale": "‚ùå C'est incorrect. La quantit√© n'est pas aussi importante que la qualit√© des donn√©es. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La rapidit√© de la collecte des donn√©es.",
                            "rationale": "‚ùå C'est important, mais la qualit√© des donn√©es est primordiale. ‚ö°",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La justesse des donn√©es remont√©es.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que la justesse des donn√©es remont√©es par la paie est l'un des √©l√©ments constitutifs d'une bonne gestion de la paie. üéØ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La complexit√© des outils de collecte.",
                            "rationale": "‚ùå C'est incorrect. La complexit√© des outils n'est pas un objectif en soi. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La formation √† la collecte et au calcul des variables de paie est un processus rapide qui ne n√©cessite pas de pratique r√©guli√®re.",
                    "hint": "La ma√Ætrise des comp√©tences fondamentales demande du temps et de l'application.",
                    "preChoiceHint": "Rome ne s'est pas faite en un jour, et la ma√Ætrise de la paie non plus ! üèõÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur la n√©cessit√© de 'ma√Ætriser l'ensemble des comp√©tences n√©cessaires √† cette activit√©', ce qui implique un apprentissage continu et de la pratique. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La formation et la ma√Ætrise des comp√©tences en paie n√©cessitent du temps, de la pratique r√©guli√®re et une veille constante pour rester √† jour avec la l√©gislation. üß†",
                            "isCorrect": true
                        }
                    ],
                    "interactiveHint": { "text": "La paie, ce n'est pas une course de vitesse, c'est un marathon de pr√©cision ! üèÉ‚Äç‚ôÄÔ∏è" }
                },
                {
                    "question": "Quel type d'outils est mentionn√© dans le document comme pouvant aider √† organiser le recueil d'informations pour la paie ?",
                    "hint": "Pensez aux technologies modernes.",
                    "preChoiceHint": "Fini le temps des tablettes d'argile, place √† la technologie ! üíª",
                    "answerOptions": [
                        {
                            "text": "‚ú® Des cahiers et des stylos.",
                            "rationale": "‚ùå C'est une m√©thode traditionnelle, mais le document mentionne des outils plus modernes. ‚úçÔ∏è",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des outils digitaux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document mentionne que de nombreux outils digitaux existent et peuvent aider √† organiser le recueil d'informations pour la paie, facilitant ainsi la gestion. üíª",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Des tablettes d'argile.",
                            "rationale": "‚ùå C'est une r√©f√©rence historique, mais pas un outil moderne de paie. üóø",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des machines √† √©crire.",
                            "rationale": "‚ùå C'est une technologie obsol√®te pour la paie moderne. üñ®Ô∏è",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi la formation √† la collecte et au calcul des variables de paie est-elle 'incontournable' pour un futur professionnel de la paie ?",
                    "hint": "Pensez √† l'importance de cette activit√© dans le m√©tier.",
                    "preChoiceHint": "C'est comme le permis de conduire pour un pilote : indispensable ! ‚úàÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Pour pouvoir travailler √† l'√©tranger uniquement.",
                            "rationale": "‚ùå C'est incorrect. La formation est essentielle pour la pratique en France √©galement. üåç",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Car c'est une activit√© secondaire et facile √† apprendre sur le tas.",
                            "rationale": "‚ùå C'est incorrect. Le document la pr√©sente comme une activit√© fondamentale et complexe. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Car elle permet de r√©pondre √† des questions essentielles sur la conformit√© et la r√©mun√©ration juste.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La collecte et le calcul des variables de paie sont incontournables car une bonne pratique permet de r√©pondre √† des questions essentielles sur l'int√©gration et l'analyse des variables, la conformit√© des dispositions applicables et la conformit√© r√©glementaire des documents. üéØ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Pour obtenir une augmentation de salaire garantie.",
                            "rationale": "‚ùå C'est incorrect. C'est une comp√©tence m√©tier, pas une garantie de salaire. üí∞",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Le contr√¥le des justificatifs et des √©l√©ments √† int√©grer aux paies est une comp√©tence essentielle pour un gestionnaire de paie.",
                    "hint": "La v√©rification des pi√®ces est cruciale pour la justesse.",
                    "preChoiceHint": "Un bon d√©tective de la paie v√©rifie toutes les preuves ! üïµÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le contr√¥le des justificatifs et des √©l√©ments √† int√©grer aux paies est explicitement mentionn√© comme l'une des comp√©tences fondamentales √† ma√Ætriser pour un gestionnaire de paie, garantissant l'exactitude des bulletins. üßæ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚ùå C'est incorrect. La v√©rification est une √©tape cruciale du processus de paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Quel est le point central de l'activit√© de gestion de paie, selon le document ?",
                    "hint": "C'est le document final remis au salari√©.",
                    "preChoiceHint": "Le Saint Graal de la paie, c'est... üèÜ",
                    "answerOptions": [
                        {
                            "text": "‚ú® La d√©claration sociale nominative (DSN).",
                            "rationale": "‚ùå La DSN est une √©tape importante, mais le document met l'accent sur le document remis au salari√©. üìä",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Le bulletin de paie.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document indique que le bulletin de paie constitue le point central de l'activit√© de gestion de paie, car il est le reflet de la r√©mun√©ration et des droits du salari√©. üìÑ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Le contrat de travail.",
                            "rationale": "‚ùå Le contrat de travail est la base, mais le bulletin de paie est le r√©sultat final de la gestion. üìú",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Les entretiens annuels d'√©valuation.",
                            "rationale": "‚ùå C'est une t√¢che RH, sans lien direct avec le point central de la paie. ü§ù",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Pourquoi la collecte des variables de paie est-elle d√©crite comme n√©cessitant 'rigueur et qualit√©s humaines' ?",
                    "hint": "Pensez aux deux facettes de l'interaction et de la pr√©cision.",
                    "preChoiceHint": "C'est un peu comme √™tre un robot avec un c≈ìur d'or ! ü§ñ‚ù§Ô∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® La rigueur est pour les calculs, les qualit√©s humaines pour les pauses caf√©.",
                            "rationale": "‚ùå C'est une simplification excessive. Les qualit√©s humaines sont importantes dans l'interaction avec les salari√©s. ‚òï",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® La rigueur est n√©cessaire pour la pr√©cision des calculs, et les qualit√©s humaines pour le r√¥le d'interlocuteur privil√©gi√© des salari√©s.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La rigueur est indispensable pour la justesse des calculs et la conformit√© l√©gale, tandis que les qualit√©s humaines sont cruciales car le gestionnaire de paie est un interlocuteur privil√©gi√© des salari√©s, n√©cessitant √©coute et compr√©hension. üß†ü§ù",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® La rigueur est pour les employeurs, les qualit√©s humaines pour les employ√©s.",
                            "rationale": "‚ùå C'est incorrect. Ces qualit√©s sont attendues du gestionnaire de paie lui-m√™me. üßë‚Äçüíº",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Seules les qualit√©s humaines sont importantes, la machine fait le reste.",
                            "rationale": "‚ùå C'est incorrect. Le document insiste sur l'importance des deux aspects. ü§ñ",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : Les cong√©s pay√©s et les absences sont des variables de paie qui doivent √™tre g√©r√©es avec pr√©cision.",
                    "hint": "Ces √©l√©ments impactent directement la r√©mun√©ration.",
                    "preChoiceHint": "Chaque jour de cong√© compte... pour la paie ! üèñÔ∏è",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La gestion des p√©riodes de cong√©s et des absences est une des comp√©tences fondamentales √† ma√Ætriser pour le calcul des variables de paie, car elles impactent directement la r√©mun√©ration du salari√©. üìÖ",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚ùå C'est incorrect. Ces √©l√©ments sont des variables cruciales en paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Un gestionnaire de paie doit-il s'assurer que les variables transmises sont correctement int√©gr√©es et analys√©es ?",
                    "hint": "Pensez √† la fiabilit√© des donn√©es d'entr√©e.",
                    "preChoiceHint": "Un comptable qui ne v√©rifie pas ses chiffres, c'est comme un chef sans papilles ! üë®‚Äçüç≥",
                    "answerOptions": [
                        {
                            "text": "‚ú® Oui, c'est une question essentielle de la bonne pratique.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Le document mentionne explicitement : 'Les variables transmises sont-elles correctement int√©gr√©es et analys√©es ?' comme une question cl√© √† laquelle une bonne pratique de paie doit permettre de r√©pondre. üìä",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Non, ce n'est pas sa responsabilit√© directe.",
                            "rationale": "‚ùå C'est incorrect. L'int√©gration et l'analyse des variables sont au c≈ìur de la responsabilit√© du gestionnaire de paie. üö´",
                            "isCorrect": false
                        }
                    ]
                },
                {
                    "question": "Vrai ou Faux : La paie est une activit√© qui ne n√©cessite pas de veille sociale r√©guli√®re.",
                    "hint": "La l√©gislation √©volue constamment.",
                    "preChoiceHint": "Le droit du travail bouge plus vite qu'un cam√©l√©on ! ü¶é",
                    "answerOptions": [
                        {
                            "text": "‚ú® Vrai.",
                            "rationale": "‚ùå C'est incorrect. La l√©gislation sociale √©volue constamment, rendant la veille sociale indispensable pour tout professionnel de la paie afin d'assurer la conformit√© des bulletins. üö´",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Faux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. La paie est une activit√© qui n√©cessite une veille sociale r√©guli√®re et constante en raison des √©volutions fr√©quentes de la l√©gislation et de la jurisprudence. üìö",
                            "isCorrect": true
                        }
                    ],
                    "interactiveHint": { "text": "Le droit social, c'est comme la m√©t√©o : √ßa change tout le temps ! Restez √† jour ! ‚òÅÔ∏è" }
                },
                {
                    "question": "Quel est l'un des risques majeurs si un gestionnaire de paie ne ma√Ætrise pas les comp√©tences fondamentales de son m√©tier ?",
                    "hint": "Pensez aux cons√©quences d'une paie incorrecte.",
                    "preChoiceHint": "Une paie mal faite, c'est un peu comme un ch√¢teau de cartes : √ßa s'√©croule vite ! üÉè",
                    "answerOptions": [
                        {
                            "text": "‚ú® Une augmentation inattendue des salaires.",
                            "rationale": "‚ùå C'est une cons√©quence peu probable d'une mauvaise ma√Ætrise g√©n√©rale des comp√©tences. üí∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Des erreurs dans les bulletins de paie et des litiges avec les salari√©s ou les organismes sociaux.",
                            "rationale": "‚úÖ C'est la bonne r√©ponse. Une mauvaise ma√Ætrise des comp√©tences fondamentales peut entra√Æner des erreurs dans les bulletins de paie, des non-conformit√©s, et potentiellement des litiges avec les salari√©s, l'URSSAF ou d'autres organismes sociaux. ü§Ø‚öñÔ∏è",
                            "isCorrect": true
                        },
                        {
                            "text": "‚ú® Une r√©duction de la charge de travail.",
                            "rationale": "‚ùå C'est incorrect. Au contraire, les erreurs peuvent augmenter la charge de travail (corrections, litiges). ‚è∞",
                            "isCorrect": false
                        },
                        {
                            "text": "‚ú® Une promotion automatique.",
                            "rationale": "‚ùå C'est incorrect. Un manque de comp√©tence n'entra√Æne pas de promotion. üöÄ",
                            "isCorrect": false
                        }
                    ]
                }
            ]
        };

        let currentQuestionIndex = 0; // Tracks the current question being displayed
        let score = 0; // Stores the user's score
        // Stores the index of the user's selected answer for each question (original index)
        let userAnswers = new Array(quizData.questions.length).fill(null);
        // Tracks if a question was answered correctly on the first attempt
        let answeredCorrectly = new Array(quizData.questions.length).fill(false);
        // Tracks if the bonus for first attempt was already applied for a question
        let firstAttemptBonusApplied = new Array(quizData.questions.length).fill(false);
        const BONUS_POINTS = 10; // Points to award for a correct first attempt

        // Get references to DOM elements
        const quizContainer = document.getElementById('quiz');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const restartButton = document.getElementById('restartButton');
        const progressBar = document.getElementById('progressBar');
        const liveScoreDisplay = document.getElementById('liveScoreDisplay');
        const correctProgressElement = document.getElementById('correctProgress');
        const incorrectProgressElement = document.getElementById('incorrectProgress');
        const unansweredProgressElement = document.getElementById('unansweredProgress');

        // Set current year in footer
        document.getElementById('currentYear').textContent = new Date().getFullYear();


        // Function to shuffle an array (Fisher-Yates algorithm)
        // Modified to preserve the original index of each option
        function shuffleArray(array) {
            // Create a copy of the array with the original index
            let indexedArray = array.map((item, index) => ({ item, originalIndex: index }));
            for (let i = indexedArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [indexedArray[i], indexedArray[j]] = [indexedArray[j], indexedArray[i]];
            }
            return indexedArray;
        }

        // Function to display the current question and its options
        function displayQuestion() {
            const questionData = quizData.questions[currentQuestionIndex];
            // M√©langer les options en conservant leur index d'origine
            const shuffledOptionsWithOriginalIndex = shuffleArray([...questionData.answerOptions]);

            // Remplir le conteneur du quiz avec le texte de la question, l'indice et les options de r√©ponse
            quizContainer.innerHTML = `
                <div class="question-text">${currentQuestionIndex + 1}. ${questionData.question}</div>
                ${questionData.preChoiceHint ? `<div id="preChoiceHint" class="pre-choice-hint">${questionData.preChoiceHint}</div>` : ''}
                <div id="answerOptions" class="flex flex-col gap-3">
                    ${shuffledOptionsWithOriginalIndex.map(optionWrapper => `
                        <div class="answer-option rounded-xl p-4 cursor-pointer transition-all duration-200 ease-in-out hover:bg-blue-100 hover:shadow-md"
                             data-original-index="${optionWrapper.originalIndex}"
                             onclick="selectAnswer(this, ${optionWrapper.originalIndex})">
                            ${optionWrapper.item.text}
                        </div>
                    `).join('')}
                </div>
                <div id="hint" class="hint-text hidden mt-4">Indice : ${questionData.hint}</div>
                <div id="rationaleContainer" class="mt-4 hidden"></div>
                <div id="bonusMessage" class="bonus-message hidden"></div> <!-- Nouveau div pour le message de bonus -->
                <div id="interactiveHintDisplay" class="interactive-hint-display hidden mt-4"></div> <!-- Nouveau div pour l'indice interactif -->
            `;

            // Si l'utilisateur a d√©j√† r√©pondu √† cette question, restaurer sa s√©lection et afficher la justification
            if (userAnswers[currentQuestionIndex] !== null) {
                const selectedOptionElement = quizContainer.querySelector(`[data-original-index="${userAnswers[currentQuestionIndex]}"]`);
                if (selectedOptionElement) {
                    // Appliquer la logique de showRationale pour restaurer les couleurs et justifications
                    showRationale(selectedOptionElement, userAnswers[currentQuestionIndex], false); // Ne pas recalculer le bonus si d√©j√† r√©pondu
                }
            } else {
                // S'assurer que les messages de bonus et d'indice interactif sont cach√©s pour une nouvelle question
                document.getElementById('bonusMessage').classList.add('hidden');
                document.getElementById('interactiveHintDisplay').classList.add('hidden');
            }


            // Mettre √† jour l'√©tat des boutons de navigation et la barre de progression
            updateNavigationButtons();
            updateProgressBar();
            updateLiveScoreDisplay(); // Mettre √† jour l'affichage du score en direct
        }

        // Function to handle answer selection by the user
        function selectAnswer(selectedElement, originalSelectedIndex) {
            // Si la question a d√©j√† √©t√© r√©pondu, emp√™cher une nouvelle s√©lection
            if (userAnswers[currentQuestionIndex] !== null) {
                return;
            }

            // Stocker l'index D'ORIGINE de la r√©ponse s√©lectionn√©e
            userAnswers[currentQuestionIndex] = originalSelectedIndex;

            // Cacher l'indice avant le choix une fois qu'une r√©ponse est s√©lectionn√©e
            const preChoiceHintElement = document.getElementById('preChoiceHint');
            if (preChoiceHintElement) {
                preChoiceHintElement.classList.add('hidden');
            }

            // Appliquer la logique de showRationale pour afficher les couleurs et justifications
            showRationale(selectedElement, originalSelectedIndex, true); // Indiquer que c'est une nouvelle tentative pour le bonus
        }

        // Function to show rationale for all options and update the score
        function showRationale(selectedElement, originalSelectedIndex, isNewAttempt) {
            const questionData = quizData.questions[currentQuestionIndex];
            const allOptionsElements = quizContainer.querySelectorAll('.answer-option');
            const rationaleContainer = document.getElementById('rationaleContainer');
            const bonusMessageElement = document.getElementById('bonusMessage'); // R√©f√©rence au nouveau div
            const interactiveHintDisplay = document.getElementById('interactiveHintDisplay'); // R√©f√©rence au nouveau div pour l'indice interactif

            rationaleContainer.innerHTML = '';
            bonusMessageElement.classList.add('hidden'); // Cacher le message de bonus par d√©faut
            interactiveHintDisplay.classList.add('hidden'); // Cacher l'indice interactif par d√©faut

            let isCurrentAnswerCorrect = false; // Pour savoir si la r√©ponse s√©lectionn√©e est correcte

            allOptionsElements.forEach(optionElement => {
                const optionOriginalIndex = parseInt(optionElement.dataset.originalIndex);
                const optionData = questionData.answerOptions[optionOriginalIndex];
                const isCorrectOption = optionData.isCorrect;
                const rationaleText = optionData.rationale;

                // Nettoyer toutes les classes de couleur avant d'appliquer les nouvelles
                optionElement.classList.remove('selected', 'correct', 'incorrect');

                // Cr√©er un div pour la justification de chaque option
                const rationaleDiv = document.createElement('div');
                rationaleDiv.classList.add('rationale', 'rounded-lg', 'p-3', 'mb-2');
                rationaleDiv.innerHTML = `<strong>${optionElement.innerText}:</strong> ${rationaleText}`;

                // Logique de couleur pour les options de r√©ponse (l'√©l√©ment cliqu√© et les autres)
                if (optionOriginalIndex === originalSelectedIndex) {
                    // C'est l'option s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('selected'); // Jaune pour l'option s√©lectionn√©e
                    if (isCorrectOption) {
                        isCurrentAnswerCorrect = true;
                        // Si la r√©ponse s√©lectionn√©e est correcte, sa justification est bleue
                        rationaleDiv.classList.add('correct-rationale');
                    } else {
                        // Si la r√©ponse s√©lectionn√©e est incorrecte, sa justification est jaune
                        rationaleDiv.classList.add('selected-rationale');
                    }
                } else if (isCorrectOption) {
                    // C'est la bonne r√©ponse, mais non s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('correct'); // Bleu pour la bonne r√©ponse non s√©lectionn√©e
                    rationaleDiv.classList.add('correct-rationale'); // Bleu pour sa justification
                } else {
                    // C'est une mauvaise r√©ponse, non s√©lectionn√©e par l'utilisateur
                    optionElement.classList.add('incorrect'); // Fuchsia pour les mauvaises r√©ponses non s√©lectionn√©es
                    rationaleDiv.classList.add('incorrect-rationale'); // Fuchsia pour sa justification
                }

                rationaleContainer.appendChild(rationaleDiv);
            });

            // Mettre √† jour le score et le statut `answeredCorrectly`
            if (isNewAttempt) { // Seulement si c'est une nouvelle tentative
                if (isCurrentAnswerCorrect) {
                    score++; // Ajoute le point de la question
                    answeredCorrectly[currentQuestionIndex] = true;
                    if (!firstAttemptBonusApplied[currentQuestionIndex]) {
                        score += BONUS_POINTS; // Ajoute les points bonus
                        firstAttemptBonusApplied[currentQuestionIndex] = true;
                        bonusMessageElement.textContent = `Bien jou√© ! +${BONUS_POINTS} points bonus pour votre premi√®re tentative ! üéâ`;
                        bonusMessageElement.classList.add('success');
                        bonusMessageElement.classList.remove('hidden');
                    }
                } else {
                    bonusMessageElement.textContent = `Pas de points bonus pour cette fois, mais continuez √† apprendre ! üí°`;
                    bonusMessageElement.classList.add('info');
                    bonusMessageElement.classList.remove('hidden');

                    // Afficher l'indice interactif si disponible et la r√©ponse est incorrecte
                    const interactiveHint = questionData.interactiveHint;
                    if (interactiveHint && interactiveHint.text) {
                        interactiveHintDisplay.textContent = interactiveHint.text;
                        interactiveHintDisplay.classList.remove('hidden');
                        interactiveHintDisplay.classList.add('fade-in'); // Ajouter la classe pour l'animation
                        // Supprimer la classe d'animation apr√®s un court d√©lai pour permettre de la re-d√©clencher
                        setTimeout(() => {
                            interactiveHintDisplay.classList.remove('fade-in');
                        }, 500); // Correspond √† la dur√©e de l'animation
                    }
                }
            }


            updateLiveScoreDisplay();
            updateProgressBar(); // Mettre √† jour la barre de progression apr√®s la s√©lection
            rationaleContainer.classList.remove('hidden');
            allOptionsElements.forEach(option => option.style.pointerEvents = 'none'); // D√©sactiver les clics apr√®s la s√©lection
            nextButton.disabled = false;
        }

        // Fonction pour mettre √† jour l'√©tat des boutons de navigation (Pr√©c√©dent/Suivant)
        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            // Le bouton Suivant est d√©sactiv√© si la question actuelle n'a pas encore √©t√© r√©pondu
            nextButton.disabled = userAnswers[currentQuestionIndex] === null;
            nextButton.textContent = currentQuestionIndex === quizData.questions.length - 1 ? 'Voir les r√©sultats' : 'Suivant';
        }

        // Fonction pour mettre √† jour la barre de progression color√©e
        function updateProgressBar() {
            const totalQuestions = quizData.questions.length;
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;

            for (let i = 0; i < totalQuestions; i++) {
                if (userAnswers[i] !== null) {
                    const originalOptionIndex = userAnswers[i];
                    const isCorrect = quizData.questions[i].answerOptions[originalOptionIndex].isCorrect;
                    if (isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                } else {
                    unansweredCount++;
                }
            }

            const correctPercentage = (correctCount / totalQuestions) * 100;
            const incorrectPercentage = (incorrectCount / totalQuestions) * 100;
            const unansweredPercentage = (unansweredCount / totalQuestions) * 100;

            correctProgressElement.style.width = `${correctPercentage}%`;
            incorrectProgressElement.style.width = `${incorrectPercentage}%`;
            unansweredProgressElement.style.width = `${unansweredPercentage}%`;

            // Afficher les pourcentages √† l'int√©rieur des sections si > 0
            correctProgressElement.textContent = correctPercentage > 0 ? `${correctPercentage.toFixed(0)}%` : '';
            incorrectProgressElement.textContent = incorrectPercentage > 0 ? `${incorrectPercentage.toFixed(0)}%` : '';
            unansweredProgressElement.textContent = unansweredPercentage > 0 ? `${unansweredPercentage.toFixed(0)}%` : '';
        }

        // Fonction pour mettre √† jour l'affichage du score en direct
        function updateLiveScoreDisplay() {
            const totalQuestions = quizData.questions.length;
            const currentQuestionNumber = currentQuestionIndex + 1;
            // Le score affich√© est le score total (points de base + bonus)
            liveScoreDisplay.textContent = `Score total : ${score} points - Question ${currentQuestionNumber} / ${totalQuestions}`;
        }

        // Fonction pour afficher les r√©sultats finaux du quiz
        function showResults() {
            const totalQuestions = quizData.questions.length;
            let finalCorrectCountQuestions = 0; // Nombre de questions r√©pondues correctement
            let finalIncorrectCountQuestions = 0; // Nombre de questions r√©pondues incorrectement
            let finalUnansweredCountQuestions = 0; // Nombre de questions non r√©pondues

            for (let i = 0; i < totalQuestions; i++) {
                if (userAnswers[i] !== null) {
                    const originalOptionIndex = userAnswers[i];
                    const isCorrect = quizData.questions[i].answerOptions[originalOptionIndex].isCorrect;
                    if (isCorrect) {
                        finalCorrectCountQuestions++;
                    } else {
                        finalIncorrectCountQuestions++;
                    }
                } else {
                    finalUnansweredCountQuestions++;
                }
            }

            const finalCorrectPercentageQuestions = ((finalCorrectCountQuestions / totalQuestions) * 100).toFixed(0);
            
            let feedbackMessage = "";
            let celebrationContent = "";
            let shareFeedbackMessage = ""; // Specific message for sharing

            if (finalCorrectPercentageQuestions <= 25) {
                feedbackMessage = `Votre score de ${finalCorrectPercentageQuestions}% de r√©ussite est un bon d√©but. Il est temps de revoir vos cours ! Continuez votre apprentissage en pratiquant et en regardant les lives. C'est essentiel pour progresser. üìöüí°`;
                shareFeedbackMessage = `Mon r√©sultat est de ${finalCorrectPercentageQuestions}% de r√©ussite. Il est temps de revoir mes cours et de progresser !`;
            } else if (finalCorrectPercentageQuestions <= 50) {
                feedbackMessage = `Votre score de ${finalCorrectPercentageQuestions}% de r√©ussite est encourageant. C'est bien, continuez ainsi ! Le prochain palier est 75%. Pour y arriver, continuez √† progresser, suivez les lives, appliquez les concepts et faites de la veille sociale. üí™üöÄ`;
                shareFeedbackMessage = `Mon score est de ${finalCorrectPercentageQuestions}% de r√©ussite. C'est encourageant, mais je vise plus haut !`;
            } else if (finalCorrectPercentageQuestions <= 75) {
                feedbackMessage = `F√©licitations pour votre score de ${finalCorrectPercentageQuestions}% de r√©ussite ! Vos efforts portent leurs fruits. Vous pouvez continuer √† vous performer et viser l'excellence. üåüüéØ`;
                shareFeedbackMessage = `J'ai obtenu ${finalCorrectPercentageQuestions}% de r√©ussite ! Tr√®s bon score, je continue de m'am√©liorer !`;
            } else { // > 75% up to 100%
                feedbackMessage = `F√©licitations pour votre score de ${finalCorrectPercentageQuestions}% de r√©ussite ! üéâüî• Vous ma√Ætrisez le sujet ! N'oubliez pas que nous sommes une √©quipe, motivez la troupe et le transfert de comp√©tences est important : aidez les autres personnes. üèÖüéì`;
                celebrationContent = `
                    <p class="text-2xl font-bold text-yellow-500 mt-4">üéâüî• M√âDAILLE D'OR ! üî•üéâ</p>
                    <p class="text-xl font-semibold text-blue-600">Dipl√¥me de Ma√Ætrise du R√®glement du Salaire !</p>
                `;
                shareFeedbackMessage = `J'ai atteint ${finalCorrectPercentageQuestions}% de r√©ussite ! C'est la f√™te ! Je suis pr√™t √† partager mes connaissances et √† motiver la troupe !`;
            }

            // Get the quiz title from the <title> tag
            const quizTitle = document.title;
            // Construct the shareable message for Discord/WhatsApp
            const shareMessage = `Voici les r√©sultats obtenus lors de mon test quiz "${quizTitle}" ! J'ai eu ${finalCorrectPercentageQuestions}% de r√©ussite (Score total : ${score} points). ${shareFeedbackMessage} Pr√™ts √† √©changer sur Discord/WhatsApp pour progresser ensemble ?`;

            quizContainer.innerHTML = `
                <div class="score-display">Votre score final : ${score} points sur un maximum de ${totalQuestions * (1 + BONUS_POINTS)} (base + bonus)</div>
                <p class="text-lg text-gray-700 mb-4">Questions correctement r√©pondues : ${finalCorrectCountQuestions} sur ${totalQuestions} (${finalCorrectPercentageQuestions}% de r√©ussite)</p>

                <div class="progress-bar final-results-chart-container">
                    <div class="progress-section correct-section" style="width: ${finalCorrectPercentageQuestions}%;">
                        ${finalCorrectPercentageQuestions > 0 ? `${finalCorrectPercentageQuestions}%` : ''}
                    </div>
                </div>

                <p class="text-xl font-semibold text-gray-800 mt-6">${feedbackMessage}</p>
                ${celebrationContent}
                <div class="mt-8 p-4 bg-gray-100 rounded-lg shadow-inner">
                    <p class="text-lg font-semibold text-gray-700 mb-2">Partagez vos r√©sultats et √©changez !</p>
                    <textarea id="shareableResult" class="w-full p-2 border rounded-md text-gray-700 bg-gray-50 mb-4" rows="4" readonly>${shareMessage}</textarea>
                    <button id="copyResultButton" class="button bg-green-500 hover:bg-green-600 mb-4">Copier le message de partage</button>
                    <p class="text-md text-gray-600 mb-2">Rejoignez la discussion sur :</p>
                    <a href="https://discord.gg/cBnBkGDFgk" target="_blank" class="inline-block mt-2 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                        Discord ‚ú®„Éªespace-papotage
                    </a>
                    <a href="https://chat.whatsapp.com/EtV0ux5ipAG5JDhopzo0ut" target="_blank" class="inline-block mt-2 ml-2 bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300">
                        WhatsApp üî• | Payroll Boss Elite Club üëë
                    </a>
                </div>
            `;

            // Add copy to clipboard functionality
            document.getElementById('copyResultButton').addEventListener('click', () => {
                const shareableResult = document.getElementById('shareableResult');
                shareableResult.select();
                document.execCommand('copy');
                // Optional: Provide visual feedback that text has been copied
                shareableResult.style.borderColor = '#10B981'; // Green border
                shareableResult.style.boxShadow = '0 0 0 2px #10B981';
                setTimeout(() => {
                    shareableResult.style.borderColor = '';
                    shareableResult.style.boxShadow = '';
                }, 1500);
            });

            // Hide navigation buttons and show restart button
            prevButton.classList.add('hidden');
            nextButton.classList.add('hidden');
            restartButton.classList.remove('hidden');
            liveScoreDisplay.classList.add('hidden'); // Hide live score display at the end
        }

        // √âcouteur d'√©v√©nement pour le bouton 'Suivant'
        nextButton.addEventListener('click', () => {
            if (currentQuestionIndex < quizData.questions.length - 1) {
                currentQuestionIndex++; // Passer √† la question suivante
                displayQuestion(); // Afficher la nouvelle question
            } else {
                showResults(); // Si c'est la derni√®re question, afficher les r√©sultats
            }
        });

        // √âcouteur d'√©v√©nement pour le bouton 'Pr√©c√©dent'
        prevButton.addEventListener('click', () => {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--; // Revenir √† la question pr√©c√©dente
                displayQuestion(); // Afficher la nouvelle question
            } else {
                // If on the first question and trying to go back, just re-display it
                displayQuestion();
            }
        });

        // √âcouteur d'√©v√©nement pour le bouton 'Recommencer le Quiz'
        restartButton.addEventListener('click', () => {
            currentQuestionIndex = 0; // R√©initialiser l'index de la question
            score = 0; // R√©initialiser le score
            userAnswers.fill(null); // Effacer les r√©ponses de l'utilisateur
            answeredCorrectly.fill(false); // R√©initialiser le suivi de la justesse
            firstAttemptBonusApplied.fill(false); // R√©initialiser le suivi du bonus
            // Cacher les messages de bonus et d'indice interactif au red√©marrage
            document.getElementById('bonusMessage').classList.add('hidden');
            document.getElementById('interactiveHintDisplay').classList.add('hidden');
            // Afficher les boutons de navigation et cacher le bouton de red√©marrage
            prevButton.classList.remove('hidden');
            nextButton.classList.remove('hidden');
            restartButton.classList.add('hidden');
            liveScoreDisplay.classList.remove('hidden'); // R√©afficher l'affichage du score en direct
            displayQuestion(); // Commencer le quiz depuis le d√©but
        });

        // Affichage initial de la premi√®re question au chargement de la page
        displayQuestion();
    </script>
</body>
</html>
ÔøΩ
